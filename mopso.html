<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8"/>
    <title>MOPSO Demo</title>
    <link href="http://netdna.bootstrapcdn.com/twitter-bootstrap/2.3.2/css/bootstrap-combined.min.css" rel="stylesheet">
</head>
<body>

<div id="container1" style="float: left;"></div>
<div id="container2" style="float: left;"></div>
<div style="clear: both;"></div>

<div id="pareto"></div>
<br />
<div id="controls">
    <button class="btn btn-primary" id="btnStep">Step</button>
    <button class="btn btn-primary" id="btnRun">Run</button>
</div>
<br />
<a href="index.html" class="btn btn-primary"><i class="icon-chevron-left icon-white"></i> View PSO</a>
<br />
<br />
<a href="https://github.com/tessellator/mopso" class="btn">Get the source</a>


<script src="http://cdnjs.cloudflare.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>
<script src="http://cdnjs.cloudflare.com/ajax/libs/modernizr/2.6.2/modernizr.min.js"></script>
<script src="http://cdnjs.cloudflare.com/ajax/libs/three.js/r58/three.min.js"></script>
<script src="js/vendor/TrackballControls.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/sylvester/0.1.3/sylvester.js"></script>
<script src="js/helpers.js"></script>
<script src="js/pso.js"></script>
<script src="js/mopso.js"></script>
<script src="js/rendercontext.js"></script>
<script src="js/graph.js"></script>
<script src="js/graph2d.js"></script>
<script src="js/psorenderer.js"></script>
<script src="js/paretorenderer.js"></script>
<script>
    $(document).ready(function () {

        var pi = Math.PI;
        var hpi = Math.PI / 2.0;

        var problems = [{
            bounds: {
                position: { minX: -pi, maxX: pi, minY: -pi, maxY: pi },
                velocity: { minX: -hpi, maxX: hpi, minY: -hpi, maxY: hpi }
            },
            dimensions: 2,
            fn: function (args) {
                var x = args[0], y = args[1];
                return 1 - (sinc(x) * sinc(y));
            }
        },
        {
            bounds: {
                position: { minX: -pi, maxX: pi, minY: -pi, maxY: pi },
                velocity: { minX: -hpi, maxX: hpi, minY: -hpi, maxY: hpi}
            },
            dimensions: 2,
            fn: function(args) {
                var x = args[0], y = args[1];
                return 2 - (Math.sin(x) + Math.cos(y));
            }
        }];

        var particleCount = 5;
        var mopso = new MOPSO(problems, 25, particleCount);

        var context1 = new RenderContext('#container1');
        var context2 = new RenderContext('#container2');

        new Graph(context1, 1000, 1000, problems[0].fn);
        new Graph(context2, 1000, 1000, problems[1].fn);

        new PSORenderer(context1, mopso.getPSOs()[0]);
        new PSORenderer(context2, mopso.getPSOs()[1]);

        var contextPareto = new RenderContext('#pareto', true);
        new Graph2D(contextPareto);
        new ParetoRenderer(contextPareto, mopso);

        context1.animate();
        context2.animate();
        contextPareto.animate();

        $('#btnStep').click(function () {
            mopso.step();
        });
        $('#btnRun').click(function () {
            mopso.run();
        });
    });
</script>
</body>
</html>
